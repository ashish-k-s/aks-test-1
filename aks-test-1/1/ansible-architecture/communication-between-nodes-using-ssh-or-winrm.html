<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Communication between nodes using SSH or WinRM :: Ansible Basics</title>
    <link rel="prev" href="ansible-control-nodes-and-managed-nodes.html">
    <link rel="next" href="../playbooks-basics/playbooks-basics.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Ansible Basics</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="aks-test-1" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Ansible Basics</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction-to-ansible/introduction-to-ansible.html">Introduction to Ansible</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-ansible/what-is-ansible-and-its-use-cases.html">What is Ansible and its use cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-ansible/installing-and-configuring-ansible.html">Installing and configuring Ansible</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ansible-architecture.html">Ansible Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ansible-control-nodes-and-managed-nodes.html">Ansible control nodes and managed nodes</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="communication-between-nodes-using-ssh-or-winrm.html">Communication between nodes using SSH or WinRM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../playbooks-basics/playbooks-basics.html">Playbooks Basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../playbooks-basics/understanding-playbook-syntax-and-structure.html">Understanding playbook syntax and structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../playbooks-basics/writing-simple-playbooks-for-basic-tasks.html">Writing simple playbooks for basic tasks</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab/hands-on-lab.html">Hands-on Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/setting-up-a-lab-environment-for-practice.html">Setting up a lab environment for practice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/executing-playbooks-on-the-lab-setup.html">Executing playbooks on the lab setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/analyzing-results-and-debugging-failures.html">Analyzing results and debugging failures</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Ansible Basics</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Ansible Basics</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Ansible Basics</a></li>
    <li><a href="ansible-architecture.html">Ansible Architecture</a></li>
    <li><a href="communication-between-nodes-using-ssh-or-winrm.html">Communication between nodes using SSH or WinRM</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Communication between nodes using SSH or WinRM</h1>
<div class="ulist">
<ul>
<li>
<p><strong>Communication Between Nodes Using SSH or WinRM</strong></p>
<div class="literalblock">
<div class="content">
<pre>Ansible facilitates automation by managing configurations of remote machines over a network. A crucial aspect of this process is the communication protocol used for interacting with managed nodes. This section explains how Ansible uses SSH for *Linux* and WinRM for *Windows* machines to establish connections, execute tasks, and gather information.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>**SSH Communication**</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>For Linux-based managed nodes, Ansible primarily employs Secure Shell (SSH) as its default communication method. Here's a detailed breakdown of the process:</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>SSH Connection</strong>: When Ansible needs to connect with a Linux node, it initiates an SSH connection using the node&#8217;s IP address or hostname.</p>
</li>
<li>
<p><strong>Authentication</strong>: The managed node prompts for credentials (username and password or key-based authentication). If key-based authentication is configured, Ansible uses the private key associated with the public key stored on the managed node to establish a secure session without entering a password.</p>
</li>
<li>
<p><strong>Command Execution</strong>: Once authenticated, Ansible can run commands on the managed node over the SSH connection using an underlying Python library called <strong>paramiko</strong>. The results of these commands are collected and utilized for further automation tasks within playbooks.</p>
<div class="literalblock">
<div class="content">
<pre>**WinRM Communication**</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>For Windows-based managed nodes, Ansible uses WinRM (Windows Remote Management), which is built upon SOAP over HTTP protocols. Here's how it works:</pre>
</div>
</div>
</li>
<li>
<p><strong>WinRM Connection</strong>: When Ansible needs to connect with a Windows node, it initiates communication using WinRM through port 5985 (HTTP) or 5986 (HTTPS).</p>
</li>
<li>
<p><strong>Authentication</strong>: The managed node uses the current userâ€™s credentials for authentication. This typically involves Windows domain accounts, although local accounts can also be used.</p>
</li>
<li>
<p><strong>Command Execution</strong>: Ansible executes PowerShell commands on the Windows nodes via WinRM using a Python library called <strong>pywinrm</strong>. The output from these commands is then collected and utilized within playbooks to drive automation tasks.</p>
<div class="literalblock">
<div class="content">
<pre>**Configuration**</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>The choice of communication protocol (SSH or WinRM) depends on the operating system of your managed nodes. You can specify alternatives if needed by configuring the `connection` parameter in your Ansible inventory file or within individual playbooks. For example, to enforce SSH for a Windows node, you would set `connection: ssh` explicitly.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>**Security Considerations**</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>When setting up communication channels between control and managed nodes, ensure that your SSH keys or WinRM credentials are securely managed. Avoid hardcoding sensitive information directly in your playbooks; instead, consider using Ansible Vault to encrypt sensitive data or leverage environment variables and Ansible's dynamic inventory features for more secure configuration management.</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>By understanding how Ansible establishes communication with managed nodes via SSH or WinRM, you can better appreciate the underlying mechanisms that enable remote execution and automation across diverse environments. This knowledge is essential when troubleshooting connectivity issues and optimizing your Ansible setup for maximum efficiency and security.</p>
</div>
<nav class="pagination">
  <span class="prev"><a href="ansible-control-nodes-and-managed-nodes.html">Ansible control nodes and managed nodes</a></span>
  <span class="next"><a href="../playbooks-basics/playbooks-basics.html">Playbooks Basics</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
