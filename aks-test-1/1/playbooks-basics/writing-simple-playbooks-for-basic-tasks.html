<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Writing simple playbooks for basic tasks :: RHEL Lightspeed Overview</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">RHEL Lightspeed Overview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="aks-test-1" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">RHEL Lightspeed Overview</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction-to-rhel-lightspeed/introduction-to-rhel-lightspeed.html">Introduction to RHEL Lightspeed</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-rhel-lightspeed/understanding-rhel-lightspeed-functionalities.html">Understanding RHEL Lightspeed functionalities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction-to-rhel-lightspeed/benefits-of-using-rhel-lightspeed.html">Benefits of using RHEL Lightspeed</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../the-command-line-assistant-powered-by-rhel-lightspeed/the-command-line-assistant-powered-by-rhel-lightspeed.html">The Command-Line Assistant Powered by RHEL Lightspeed</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../the-command-line-assistant-powered-by-rhel-lightspeed/interactive-workflows-with-the-command-line-assistant.html">Interactive workflows with the command-line assistant</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../the-command-line-assistant-powered-by-rhel-lightspeed/using-the-assistant-for-troubleshooting-log-files-interpretation-and-recommendations.html">Using the assistant for troubleshooting, log files interpretation, and recommendations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../the-command-line-assistant-powered-by-rhel-lightspeed/limitations-of-the-command-line-assistant.html">Limitations of the command-line assistant</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../the-command-line-assistant-powered-by-rhel-lightspeed/proxying-rhel-system-requests-through-an-internet-connected-single-proxy-system.html">Proxying RHEL system requests through an internet-connected single proxy system</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rhel-lightspeed-use-of-generative-ai-functionalities/rhel-lightspeed-use-of-generative-ai-functionalities.html">RHEL Lightspeed Use of Generative AI Functionalities</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rhel-lightspeed-use-of-generative-ai-functionalities/utilization-of-watsonx-ai-api-llm-large-language-model-as-a-saas-external-infrastructure.html">Utilization of WatsonX AI API LLM (Large Language Model) as a SaaS external infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rhel-lightspeed-use-of-generative-ai-functionalities/understanding-access-and-information-sharing-with-the-command-line-assistant.html">Understanding access and information sharing with the command-line assistant</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rhel-lifecycle-support-and-policies/rhel-lifecycle-support-and-policies.html">RHEL Lifecycle Support and Policies</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rhel-lifecycle-support-and-policies/supported-versions-in-red-hat-enterprise-linux-life-cycle.html">Supported versions in Red Hat Enterprise Linux Life Cycle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rhel-lifecycle-support-and-policies/associated-policies-for-rhel-lightspeed-use.html">Associated policies for RHEL Lightspeed use</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">RHEL Lightspeed Overview</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">RHEL Lightspeed Overview</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">RHEL Lightspeed Overview</a></li>
    <li><a href="writing-simple-playbooks-for-basic-tasks.html">Writing simple playbooks for basic tasks</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Writing simple playbooks for basic tasks</h1>
<div class="sect2">
<h3 id="_playbooks_basics_writing_simple_playbooks_for_basic_tasks"><a class="anchor" href="#_playbooks_basics_writing_simple_playbooks_for_basic_tasks"></a>Playbooks Basics: Writing Simple Playbooks for Basic Tasks</h3>
<div class="paragraph">
<p>In Ansible, a playbook is a file containing one or more plays. Each play outlines specific tasks that need to be executed on managed nodes (target servers). Playbooks are written in YAML format and use Ansible&#8217;s declarative language to describe the desired system state. This section will guide you through writing simple playbooks for basic administrative tasks.</p>
</div>
<div class="sect3">
<h4 id="_understanding_playbook_syntax_and_structure"><a class="anchor" href="#_understanding_playbook_syntax_and_structure"></a>Understanding Playbook Syntax and Structure</h4>
<div class="paragraph">
<p>A typical Ansible playbook has the following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
- name: Playbook description
  hosts: Target servers or group(s)
  gather_facts: Whether to gather facts about remote nodes (yes/no)
  vars: Variable definitions for the play
  tasks: List of tasks to be executed on managed nodes
    task1: Description of the first task
      command: Command to execute
      register: A variable to store the output or return value</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name</code>: An optional description of what the playbook does.</p>
</li>
<li>
<p><code>hosts</code>: The servers or groups of servers on which tasks will be executed.</p>
</li>
<li>
<p><code>gather_facts</code>: Controls whether Ansible gathers simple facts about remote nodes before executing a play (set to 'yes' by default).</p>
</li>
<li>
<p><code>vars</code>: Defines variables for use across the play.</p>
</li>
<li>
<p><code>tasks</code>: A list of tasks to be executed, with each task having a name, description, and a set of actions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_writing_simple_playbooks"><a class="anchor" href="#_writing_simple_playbooks"></a>Writing Simple Playbooks</h4>
<div class="paragraph">
<p>Let&#8217;s create simple playbooks for basic administrative tasks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Create a new file</strong> called <code>basic_tasks.yml</code> and open it in your preferred text editor.</p>
</li>
<li>
<p><strong>Insert the following content</strong> to create a playbook that installs Apache web server on target servers:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
- name: Install Apache webserver
  hosts: webservers
  gather_facts: yes
  become: yes

  tasks:
    - name: Ensure Apache is installed
      apt:
        name: apache2
        state: present

    - name: Start and enable the Apache service
      service:
        name: apache2
        enabled: yes
        state: started</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this playbook:
- The <code>webservers</code> group contains the target servers where you want to install Apache. Make sure to configure your inventory file (<code>ansible_host</code>) accordingly.
- <code>become: yes</code> ensures that tasks are run with root privileges using <code>sudo</code>.
- Two tasks are defined:
  1. Use the <code>apt</code> module to ensure the <code>apache2</code> package is installed and present on managed nodes.
  2. Start and enable the Apache service using the <code>service</code> module.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Save</strong> the playbook file (<code>basic_tasks.yml</code>).</p>
</li>
<li>
<p>To execute this playbook, run the following command in your terminal:</p>
<div class="literalblock">
<div class="content">
<pre>```bash
ansible-playbook basic_tasks.yml
```</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>This playbook will connect to the specified web servers, install Apache, start the service, and ensure it starts on boot. Review the output to see the success or failure of each task.</p>
</div>
</div>
<div class="sect3">
<h4 id="_troubleshooting_and_insights"><a class="anchor" href="#_troubleshooting_and_insights"></a>Troubleshooting and Insights</h4>
<div class="paragraph">
<p>When writing and executing Ansible playbooks, consider these tips for troubleshooting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check the <code>ansible-lint</code> tool for syntax errors and best practices compliance in your playbook files.</p>
</li>
<li>
<p>Review logs located at <code>/var/log/ansible</code> on managed nodes for detailed task execution information.</p>
</li>
<li>
<p>Use <code>ansible --version</code> to check your Ansible installation, and compare it with the required version for your playbooks.</p>
</li>
<li>
<p>Ensure proper inventory configuration and connectivity between control and managed nodes before executing playbooks.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By understanding the structure of Ansible playbooks and practicing with simple tasks like installing web servers, you can build a strong foundation in using Ansible for automating system administration tasks. As you gain experience, expand your playbooks to incorporate more complex configurations and orchestration.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
